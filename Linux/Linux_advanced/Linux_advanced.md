# Linux_advanced

## Вопрос 1
Вы просматриваете журнал /var/log/syslog и замечаете следующее сообщение ядра: kernel: TCP: Possible SYN flooding on port 80.

Как можно интерпретировать это предупреждение?

- Сетевой интерфейс перегружен входящими соединениями
- Служба SSH работает с ошибками авторизации
- Процессор перегружен вычислительными задачами
- Система испытывает нехватку дискового пространства
- Принтер отправляет большое количество заданий на печать

---

## Вопрос 2
Какой командой в Linux можно отфильтровать в реальном времени только сообщения уровня ERROR из журналов systemd?

- dmesg | grep ERROR
- journalctl -p 7 -f
- journalctl -p 3 -f
- systemctl list-units
- journalctl -p 5 -f

---

## Вопрос 3
В каталоге находятся файлы с именами: file1.txt, file2.txt, file3.txt, file with spaces.txt

Рассмотрите следующий скрипт, в котором список файлов задан вручную через переменную files.

Какая ошибка в нём приводит к некорректной обработке файлов с пробелами в именах?

- Используется неверный тип данных для хранения
- Пробелы не экранированы в списке файлов
- Не установлен IFS=$'\n' перед циклом
- Не отключено расширение шаблонов (globbing)
- Не обёрнуты значения переменной $files в кавычки

---

## Вопрос 4
Вы хотите создать скрипт, который выводит по одному имени на строку всех файлов в текущем каталоге, начинающихся на file и заканчивающихся на .txt. Какой фрагмент кода нужно использовать?

- for file in file*.txt ; do echo " $file " ; done
- for file in file?.txt ; do echo " $file " ; done
- for file in *.txt ; do echo " $file " ; done
- for file in file.".txt ; do echo " $file " ; done
- For file in file*.text ; do echo " $file " ; done

---

## Вопрос 5
Вы анализируете конфигурацию Nginx, который размещён на публичном веб-сервере. Ниже приведён фрагмент файла /etc/nginx/sites-enabled/default:
```
1 server {
2   listen 80 default_server;
3   server_name example.com;
4   root /var/www/html;
5   index index.php index.html index.htm;
6   location / {
7     autoindex on;
8     try_files $uri $uri/ =404;
9   }
10   location ~ \.php$ {
11     include snippets/fastcgi-php.conf;
12     fastcgi_pass unix:/run/php/php8.1-fpm.sock;
13   }
14 }
```
Какая наиболее существенная проблема безопасности содержится в этой конфигурации?

- Сервер обслуживает только example.com, поэтому остальные запросы будут отклонены
- Используется Unix-сокет для PHP вместо TCP-порта, что небезопасно в продакшене
- Отсутствует ограничение доступа к PHP-файлам, что позволяет выполнять произвольный код
- Неверно настроена директива try_files, что может вызвать ошибки 500
- autoindex on раскрывает структуру директорий сервера при отсутствии index-файлов

---

## Вопрос 6
После внесения изменений в файл /etc/nginx/nginx.conf, вы хотите, чтобы новая конфигурация вступила в силу немедмедленно, но при этом:

* не было разрыва активных соединений,
* не прерывались запросы в процессе обработки,
* и были зарегистрированы возможные ошибки конфигурации.

Какое действие следует предпринять?

- Выполнить systemctl daemon-reexec nginx
- Выполнить systemctl reload nginx
- Убить процесс master с помощью kill -HUP $(pidof nginx)
- Выполнить systemctl restart nginx
- Выполнить nginx -s stop && nginx

---

## Вопрос 7
Вы анализируете нагрузку на сервер. Выполнение команды top дало следующий результат:
```
%Cpu(s): 3.0 us, 1.0 sy, 0.0 ni, 85.0 id, 0.0 wa, 0.0 hi, 0.0 si, 11.0 st
```
Через 10 секунд вы повторили команду и получили:
```
%Cpu(s): 5.0 us, 3.0 sy, 0.0 ni, 25.0 id, 0.0 wa, 0.0 hi, 0.0 si, 67.0 st
```
Что наиболее вероятно можно заключить по изменению состояния системы?

- Растёт нагрузка от пользовательских приложений, но ресурсов всё ещё достаточно
- Система простаивает, ресурсов по-прежнему достаточно.
- Происходит утечка памяти, увеличивается использование swap
- Увеличилось количество системных вызовов и процессов, но система стабильна
- Виртуальная машина активно вытесняется гипервизором, и вычислительные ресурсы ограничены

---

## Вопрос 8
На сервере наблюдается замедленная работа приложений. Вам нужно в реальном времени определить, какие процессы загружают процессор и сколько оперативной памяти используется. Какую команду следует применить?

- du -sh
- top
- grep cpuinfo
- ps aux
- df -h

---

## Вопрос 9
Вы анализируете задание в crontab:
```
30 2 * * 1-5 /usr/local/bin/backup.sh
```
Что выполняет это задание?

- Скрипт выполняется каждый час в будние дни
- Скрипт выполняется каждый понедельник и пятницу.
- Скрипт выполняется в 2:30 ночи только по будням
- Скрипт выполняется каждый день в 2:30 ночи
- Скрипт выполняется каждую неделю в воскресенье

---

## Вопрос 10
Вы настраиваете задачу с использованием systemd-таймера. Ниже представлен фрагмент конфигурации таймера:
```
1 [Unit]
2 Description=Очистка логов
3 [Timer]
4 OnCalendar=*-*-* 00:00:00
5 Persistent=true
6 [Install]
7 WantedBy=timers.target
```
И соответствующий unit-файл:
```
1 [Unit]
2 Description=Выполнение очистки логов
3 [Service]
4 Type=oneshot
5 ExecStart=/opt/scripts/clear_logs.sh
```
Что произойдёт, если сервер будет выключен в момент времени выполнения задачи (полночь) и будет включён в 08:00?

- Таймер выполнит задачу сразу после включения сервера
- Задача будет запущена дважды — сразу и в полночь
- Ничего не произойдёт, потому что WantedBy=timers.target неактивен
- systemd выдаст ошибку о невозможности вычислить OnCalendar и таймер не запустится
- Таймер пропустит выполнение и запустится в следующую полночь

---

## Вопрос 11
После обновления ядра и пакетов на сервере служба network перестала запускаться автоматически. При попытке вручную запустить службу network с помощью systemctl start network возникает ошибка:
```
Job for network.service failed because the control process exited with error code.
See "systemctl status network.service" and "journalctl -xe" for details.
```
Команда systemctl status network.service показывает, что юнит существует, но не стартует.

Какова наиболее вероятная причина этой проблемы?

- Файл конфигурации network.service повреждён или содержит ошибку синтаксиса
- Драйвер сетевой карты несовместим с новым ядром и не загружается автоматически
- Служба network конфликтует с новым системным менеджером NetworkManager, вызывая ошибку запуска
- В конфигурации systemd отсутствует корректная зависимость от загрузки модулей ядра
- Права доступа к файлам службы network.service были изменены, что препятствует её запуску

---

## Вопрос 12
Вы хотите проверить, сколько времени заняла активация служб при старте системы. Какую команду следует использовать?

- top
- dmesg
- journalctl -xe
- systemd-analyze blame
- systemctl list-units

---

## Вопрос 13
На сервере настроен OpenSSH с конфигурацией:
```
1 Port 7227
2 PermitRootLogin no
3 PasswordAuthentication no
4 AuthenticationMethods publickey
5 AllowGroups sshusers
6 DenyUsers tempadmin
7 Match Address 192.168.1.0/24
8   PermitRootLogin yes
9   AuthorizedKeysFile /etc/ssh/keys/root_auth_keys
10 Match User tempadmin
11   AuthenticationMethods publickey,password
```
Контрольная проверка выявила возможность неавторизованного доступа с повышенными привилегиями из доверенного сегмента.

Какой из вариантов лучше всего объясняет причину обнаруженной уязвимости?

- Использование нестандартного файла AuthorizedKeysFile (/etc/ssh/keys/root_auth_keys) без корректных прав доступа может позволить неавторизованное использование ключей
- Правило AllowGroups sshusers разрешает доступ всем пользователям из этой группы, включая tempadmin, несмотря на директиву DenyUsers
- Сетевой блок Match Address позволяет root вход по ключу из внутренней сети, несмотря на глобальный запрет
- Глобальная директива PermitRootLogin no не гарантирует блокировку, если локальный Match Address разрешает root доступ, что создаёт конфликт приоритета настроек
- Для пользователя tempadmin задана двухфакторная аутентификация с publickey и паролем, при этом глобально отключена проверка пароля, что может привести к непредсказуемому обходу ограничений

---

## Вопрос 14
На сервере с включённым SELinux приложение webapp запущено под собственным доменом webapp_t. В конфигурации SELinux для webapp_t разрешён доступ только к определённым файлам в каталоге /var/www/webapp, а также ограничены сетевые подключения. При этом в системе назначены Linux capabilities CAP_NET_BIND_SERVICE и CAP_DAC_OVERRIDE для бинарника webapp.

При текущей конфигурации существует риск нарушения изоляции и несанкционированного доступа к критическим файлам вне разрешённого каталога.

Что из ниже перечисленного наиболее вероятно объясняет причину уязвимости?

- Использование собственного домена webapp_t полностью изолирует приложение, но назначение любых capabilities приводит к отключению SELinux для данного процесса
- SELinux ограничивает только доступ к файлам, а capabilities управляют только сетевыми ресурсами, следовательно риск нарушения изоляции исключён
- Разрешение CAP_NET_BIND_SERVICE позволяет приложению прослушивать сетевые порты ниже 1024, что создаёт прямую уязвимость в SELinux политике
- Назначение CAP_DAC_OVERRIDE позволяет приложению обходить стандартные проверки прав доступа файловой системы, игнорируя ограничения SELinux на уровне DAC, что приводит к возможному доступу к файлам вне /var/www/webapp
- SELinux политика по умолчанию игнорирует права capabilities, поэтому назначение CAP_DAC_OVERRIDE не влияет на безопасность

---

## Вопрос 15
Вы анализируете запись в /etc/fstab:
```
/dev/sdb1 /backup ext4 defaults 0 0
```
Что означает эта запись для проверки файловой системы при загрузке?

- Проверка ограничится главной файловой системой
- Файловая система будет проверяться каждый раз
- Файловая система будет проверяться при сбоях
- Проверка файловой системы будет отключена
- Будет выполнена автоматическая проверка после загрузки

---

## Вопрос 16
После монтирования новой файловой системы в /data ранее созданные файлы и каталоги в этом каталоге стали недоступны. Перед монтированием структура выглядела так:
```
1 /data/
2 ├── app/
3 └── config.yaml
```
Затем была выполнена команда:

1 mount /dev/sdb1 /data

После монтирования содержимое /data полностью изменилось.

Какой из следующих вариантов наилучшим образом объясняет ситуацию?

- Каталог /data перекрыт точкой монтирования
- Данные из /data были удалены после монтирования
- mount автоматически переместил файлы из /data на новое устройство
- Без флага preserve mount стирает старое содержимое
- Старые данные были перенесены в /lost+found

